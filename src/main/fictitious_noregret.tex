\section{Fictitious Play is no-regret}\label{s:fictitious_noregret}

In this section we consider the Online Convex Optimization problem
that we defined in Subsection~\ref{s:preliminaries:oco}.
For every agent $i$ with $a_i, s_i$, the following OCO problem is defined.
For $b\in [0,1]$ we define $C_b(z) = \alpha_i(z-s_i)^2 + (1-\alpha_i)(z-b)^2$.
The feasibility set is $K = [0,1]$ and the set of functions that the
adversary chooses from is $\mcal{F}_i = \{ C_b(z): b \in [0,1] \}$.
Since the functions of $\mcal{F}_i$ are uniquely determined by $b$
the adversary simply chooses a sequence $b^t$.
We now show that fictitious play admits no-regret for this OCO problem.
To simplify notation, since we have fixed an agent $i$, we drop the subscript
$i$ from the following, i.e. we denote $\alpha_i$ by $\alpha$.
Let $z^t$ be the choice that $A$ makes at time $t$.
\begin{theorem}\label{t:no_regret}
  Let
  \(z^t = \argmin_{ z \in [0,1]} \sum_{\tau = 0}^{t-1} C^\tau (z) \)
  then
  \[
    \sum_{t = 0}^{T} C^t(z^t) \leq
    \min_{ z \in [0,1]} \sum_{t=0}^T C^t(z) + O(\log  T).
  \]
\end{theorem}

In order to prove this claim, we will first define a similar rule $y^t$
that takes into account the function $C^t$ for the "prediction" at time $t$.
Intuitively, this guarantees that the rule admits no regret.

\begin{lemma}
  Let
  \(y^t = \argmin_{z \in [0,1]} \sum_{\tau = 0}^t C^\tau (z)\)
  then
  \[
    \sum_{t=0}^T C^t(y^t) \leq \min_{z \in [0,1]} \sum_{t=0}^T C^t(z)
  \]
\end{lemma}

\begin{proof}By definition of $y^t$,
  $\min_{ z \in [0,1]} \sum_{t=0}^T C^t(z) = \sum_{t=0}^T C^t(y^T)$, so
  \begin{align*}
    \sum_{t=0}^T C^t(y^t) - \min_{ z \in [0,1]} \sum_{t=0}^T C^t(z) &=
    \sum_{t=0}^T C^t(y^t) - \sum_{t=0}^T C^t(y^T)\\
    &= \sum_{t=0}^{T-1} C^t(y^t) - \sum_{t=0}^{T-1} C^t(y^T)\\
    &\leq \sum_{t=0}^{T-1} C^t(y^t) - \sum_{t=0}^{T-1} C^t(y^{T-1})\\
    &= \sum_{t=0}^{T-2} C^t(y^t) - \sum_{t=0}^{T-2} C^t(y^{T-1})
  \end{align*}
  Continuing in the same way, we get
  $\sum_{t=0}^T C^t(y^t) \leq min_{ z \in [0,1]} \sum_{t=0}^T C^t(z)$.
\end{proof}

Now we can derive some intuition for the reason that \emph{fictitious play}
admits no regret. Since the cost incurred by the sequence $y^t$ is at most that
of the best fixed strategy, we can compare the cost incurred by $z^t$ with
that of $y^t$.  However, the functions in $\mcal{F}_i$ are Lipschitz-continuous and more
specifically quadratic.
These functions are all "similar" to each other, so the extra function $C^t$ that $y^t$ takes
as input doesn't change dramatically the minimum point of the sum.
Thus, for each $t$ the numbers $z^t$ and $y^t$ are quite
close and as a result the difference in their cost must be quite small.

\begin{lemma}
  For all $t$,
  \(C^t(z^t) \leq C^t(y^t) + 2\frac{1-\alpha}{t+1} + \frac{(1-\alpha)^2}{(t+1)^2}\).
\end{lemma}
\begin{proof}
  We first prove that for all $t$,
  \begin{equation}\label{eq:abs_value}
    \lp|z^t - y^t \rp| \leq \frac{1-\alpha}{t+1}.
  \end{equation}
  By definition
  \(z^t = \alpha s + (1-\alpha)\frac{\sum_{\tau = 0}^{t-1} b_\tau}{t}\)
  and
  \( y^t = \alpha s + (1-\alpha)\frac{\sum_{\tau = 0}^t b_\tau}{t+1}\).
  \begin{align*}
    \lp|z^t - y^t\rp|
    &=
    (1-\alpha)\lp|\frac{\sum_{\tau = 0}^{t-1}b_\tau}{t}
    - \frac{\sum_{\tau = 0}^t b_\tau}{t+1}\rp|\\
    &=
    (1-\alpha)\lp|\frac{\sum_{\tau = 0}^{t-1}b_\tau -tb^t}{t(t+1)}\rp|\\
    &\leq
    \frac{1-\alpha}{t+1}
  \end{align*}
  The last inequality follows from the fact that $b_\tau \in [0,1]$.
  We now use inequality~(\ref{eq:abs_value}) to bound the difference
  \( C^t(z^t) - C^t(y^t) \).
  \begin{align*}
    C^t(z^t)
    &=
    \alpha(z^t - s)^2 + (1 - \alpha)(z^t - y_t)^2 \\
    &\leq
    \alpha(y^t - s)^2 + 2\alpha\lp|y^t -
    s\rp|\lp|z^t - y^t\rp| + \alpha \lp|z^t - y^t\rp|^2 \\
    &\quad + (1-\alpha)(y_t - y_t)^2 +
    2(1-\alpha)\lp|y^t - y_t\rp|\lp|z^t-y^t\rp| + (1 - \alpha)\lp|z^t - y^t\rp|^2\\
    &\leq
    C^t(y^t) + 2\lp|z^t - y^t\rp| + \lp|y^t - z^t\rp|^2\\
    &\leq
    C^t(y^t) + 2\frac{1-\alpha}{t+1} + \frac{(1-\alpha)^2}{(t+1)^2}
  \end{align*}
\end{proof}

Theorem~\ref{t:no_regret} easily follows since
\begin{align*}
  \sum_{t=0}^T C^t(z^t)
  &\leq
  \sum_{t=0}^T C^t(y^t) + \sum_{t=0}^T 2\frac{1-\alpha}{t+1} +
  \sum_{t=0}^T \frac{(1-\alpha)^2}{(t+1)^2}\\
  &\leq
  \min_{ z \in [0,1]} \sum_{t=0}^T C^t(z) +
  2(1-\alpha)(\log T + 1) + (1-\alpha)\frac{\pi^2}{6}\\
  &\leq
  \min_{ z \in [0,1]} \sum_{t=0}^T C^t(z) + O(\log T)
\end{align*}
